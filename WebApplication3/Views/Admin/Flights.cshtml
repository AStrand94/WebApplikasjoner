@model IEnumerable<WebApplication3.Model.Flight>
<link href="~/Content/themes/base/jquery-ui.min.css" rel="stylesheet"/>
<script src="~/Scripts/jquery-ui-1.12.1.min.js"></script>

<link href="~/Content/jquery-ui-timepicker-addon.min.css" rel="stylesheet" />
<script src="~/Scripts/jquery-ui-timepicker-addon.min.js"></script>

<h2>Flights</h2>

@Html.Partial("_Search")

<p>
    @Html.ActionLink("Add flight", "CreateFlight", null, new { @class = "btn btn-primary" })
</p>

<div id="accordion" class="panel-group">
    @foreach (var item in Model)
    {
        <div class="panel panel-default">
            <div class="panel-heading" id="heading@(item.Id)">
                <h4 class="panel-title">
                    <a data-toggle="collapse" data-parent="#accordion" href="#collapse@(item.Id)" class="searchItem">@item.Route.FromAirport.Name - @item.Route.ToAirport.Name, @item.Time.ToShortDateString()</a>
                </h4>
            </div>
            <div id="collapse@(item.Id)" class="panel-collapse collapse" role="tabpanel" data-parent="#accordion">
                <div class="panel-body">
                    <input type="hidden" value="@item.Id" />
                    <div class="container">
                        <div class="row form-group">
                            @Html.LabelFor(i => item.Route, new { @class = "control-label col-md-1 " })
                            <div class="col-md-8 col-md-offset-1">
                                <select class="form-control" name="route">
                                @foreach(var r in (IEnumerable<WebApplication3.Model.Route>)TempData["allRoutes"])
                                {
                                    <option @(item.Id == r.Id ? "selected" : "") value="@r.Id">@r.FromAirport.Name - @r.ToAirport.Name</option>
                                }
                                </select>
                            </div>
                        </div>
                        <div class="row form-group">
                            @Html.LabelFor(i => item.Time.Date, new { @class = "control-label col-md-1 " })
                            <div class="col-md-8 col-md-offset-1">
                                @Html.EditorFor(i => item.Time, new { htmlAttributes = new { @class = "form-control date-picker", value = item.Time.ToString("dd-MMM-yyyy") , onkeydown = "return false", onpaste = "return false" } })
                             </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
</div>

<script>
    $(document).ready(function () {

        $(".date-picker").datetimepicker({
            dateFormat: 'dd-M-yy',
            changeMonth: true,
            changeYear: true,
            yearRange: "-10:+10", // You can set the year range as per as your need
            timeFormat: 'hh:mm TT',
            controlType: "select",
            onSelect: function () {
                $(this).text(this.value);
            }
            });
    });
</script>
